{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fnil\fcharset0 Menlo-Bold;}
{\colortbl;\red255\green255\blue255;\red56\green185\blue199;\red0\green0\blue0;\red170\green171\blue37;
\red57\green192\blue38;\red202\green51\blue35;\red86\green32\blue244;\red219\green39\blue218;}
{\*\expandedcolortbl;;\cssrgb\c25546\c77007\c82023;\csgray\c0;\cssrgb\c72331\c71682\c18599;
\cssrgb\c25706\c77963\c19557;\cssrgb\c83899\c28663\c18026;\cssrgb\c41681\c25958\c96648;\cssrgb\c89513\c29736\c88485;}
\paperw11900\paperh16840\margl1440\margr1440\vieww14500\viewh15960\viewkind0
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \CocoaLigature0 #!/bin/bash -l\cf3 \
\cf2 #SBATCH -J hf_job\cf3                  \cf2 # Job name\cf3 \
\cf2 #SBATCH -o ./job_%j.out           # STDOUT\cf3 \
\cf2 #SBATCH -e ./job_%j.err           # STDERR\cf3 \
\cf2 #SBATCH -D ./\cf3                      \cf2 # Working directory\cf3 \
\cf2 #SBATCH --ntasks=1\cf3                 \cf2 # Number of tasks (1 Python process)\cf3 \
\cf2 #SBATCH --cpus-per-task=18        # CPU cores\cf3 \
\cf2 #SBATCH --mem=125000\cf3               \cf2 # Memory in MB (125GB)\cf3 \
\cf2 #SBATCH --time=10:00:00           # Max runtime\cf3 \
\cf2 #SBATCH --constraint=
\f1\b \cf4 "gpu"
\f0\b0 \cf2         # Use GPU nodes\cf3 \
\cf2 #SBATCH --gres=gpu:a100:1         # Request 1 GPU\cf3 \
\
\cf2 # Load software modules\cf3 \
module purge\
module load gcc/10 impi/2021.2 cuda/12.6\
\
\cf2 # Activate your existing Python environment\cf3 \
source /u/jemey/envs/llm/bin/activate\
\
\cf2 # Set number of threads\cf3 \
\cf5 export\cf3  OMP_NUM_THREADS\cf5 =
\f1\b \cf6 $\{SLURM_CPUS_PER_TASK\}
\f0\b0 \cf3 \
\
\cf2 # Set Huggingface cache to /ptmp\cf3 \

\f1\b \cf7 mkdir\cf8  -p
\f0\b0 \cf3  /ptmp/
\f1\b \cf6 $USER
\f0\b0 \cf3 /huggingface\
\cf5 export\cf3  HF_HOME\cf5 =\cf3 /ptmp/
\f1\b \cf6 $USER
\f0\b0 \cf3 /huggingface\
\cf5 export\cf3  TRANSFORMERS_CACHE\cf5 =
\f1\b \cf6 $HF_HOME
\f0\b0 \cf3 \
\
\cf2 # Run Python script\cf3 \
srun python script.py
\f1\b \cf8  --input
\f0\b0 \cf3  prompts.jsonl\
\
\
\
\
\
}